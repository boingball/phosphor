<Window x:Class="RetroDisplay.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Phosphor - Classic Monitor Viewer"
        Width="1200"
        Height="760"
        MinWidth="1080"
        MinHeight="680"
        Background="#1a1a1a"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize">

    <!-- ================= RESOURCES ================= -->
    <Window.Resources>

        <!-- Buttons -->
        <Style x:Key="RetroButton" TargetType="Button">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="#00ff00"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderBrush" Value="#00ff00"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- ComboBoxes -->
        <Style x:Key="RetroCombo" TargetType="ComboBox">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="#000000"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="BorderBrush" Value="#555"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <!-- CRT-style chunky sliders -->
        <Style x:Key="CrtSlider" TargetType="Slider">
            <Setter Property="Height" Value="28"/>
            <Setter Property="Margin" Value="0,1,0,6"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid Height="28">
                            <Track x:Name="PART_Track"
                           IsDirectionReversed="False">
                                <!-- Track background -->
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton IsHitTestVisible="False"
                                          Background="#555"
                                          Height="6"
                                          VerticalAlignment="Center"/>
                                </Track.DecreaseRepeatButton>

                                <Track.IncreaseRepeatButton>
                                    <RepeatButton IsHitTestVisible="False"
                                          Background="#555"
                                          Height="6"
                                          VerticalAlignment="Center"/>
                                </Track.IncreaseRepeatButton>

                                <!-- Thumb -->
                                <Track.Thumb>
                                    <Thumb Width="24"
                                   Height="16"
                                   VerticalAlignment="Center">
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="Thumb">
                                                <Border Background="#cfcfcf"
                                                BorderBrush="#888"
                                                BorderThickness="1"
                                                CornerRadius="2"/>
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


    </Window.Resources>

    <!-- ================= LAYOUT ================= -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="320"/>
        </Grid.ColumnDefinitions>

        <!-- ================= TV AREA ================= -->
        <Grid Grid.Column="0" Margin="18">

            <!-- Sony-style layered bezel -->
            <Border Background="#3a3a3a" CornerRadius="10">
                <Border Background="#5b4636" Margin="6" CornerRadius="8">
                    <Border Background="#2f2f2f"
                            BorderBrush="#1f1f1f"
                            BorderThickness="18"
                            CornerRadius="6">

                        <Grid>

                            <!-- Screen -->
                            <Border x:Name="ScreenBorder"
                                    Background="Black"
                                    CornerRadius="2"
                                    ClipToBounds="True">

                                <Grid x:Name="VideoContainer">

                                    <Image x:Name="VideoPlayer"
                                           Stretch="Uniform"
                                           RenderOptions.BitmapScalingMode="NearestNeighbor"
                                           SnapsToDevicePixels="True"
                                           UseLayoutRounding="True"/>

                                    <!-- Placeholder -->
                                    <Grid x:Name="PlaceholderGrid" Visibility="Visible">
                                        <TextBlock Text="SELECT VIDEO SOURCE"
                                                   FontFamily="Consolas"
                                                   FontSize="22"
                                                   FontWeight="Bold"
                                                   Foreground="#00ff00"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   Opacity="0.3"/>
                                    </Grid>

                                    <!-- Scanlines -->
                                    <Rectangle x:Name="ScanlinesOverlay" Opacity="0">
                                        <Rectangle.Fill>
                                            <DrawingBrush Viewport="0,0,1,4"
                                                          ViewportUnits="Absolute"
                                                          TileMode="Tile">
                                                <DrawingBrush.Drawing>
                                                    <GeometryDrawing Brush="Black">
                                                        <GeometryDrawing.Geometry>
                                                            <RectangleGeometry Rect="0,2,1,1"/>
                                                        </GeometryDrawing.Geometry>
                                                    </GeometryDrawing>
                                                </DrawingBrush.Drawing>
                                            </DrawingBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>

                                    <!-- Vignette -->
                                    <Border x:Name="VignetteOverlay" Opacity="0">
                                        <Border.Background>
                                            <RadialGradientBrush>
                                                <GradientStop Color="Transparent" Offset="0.5"/>
                                                <GradientStop Color="#40000000" Offset="1"/>
                                            </RadialGradientBrush>
                                        </Border.Background>
                                    </Border>

                                </Grid>
                            </Border>

                            <!-- Model label -->
                            <TextBlock Text="PHOSPHOR"
                                       FontFamily="Arial Black"
                                       FontSize="12"
                                       Foreground="#666"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Bottom"
                                       Margin="0,0,0,-15"/>

                        </Grid>
                    </Border>
                </Border>
            </Border>
        </Grid>

        <!-- ================= CONTROL PANEL ================= -->
        <Border Grid.Column="1"
                Background="#252525"
                BorderBrush="#3a3a3a"
                BorderThickness="1,0,0,0">

                <StackPanel Margin="10">

                    <TextBlock Text="⚡ CONTROL PANEL"
                               FontFamily="Consolas"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="#00ff00"
                               Margin="0,0,0,14"/>

                    <TextBlock Text="VIDEO SOURCE"
                       FontSize="8.5"
                       Foreground="#888"
                       Margin="0,0,0,4"/>

                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>

                        <ComboBox x:Name="VideoSourceCombo"
                          Grid.Column="0"
                          Style="{StaticResource RetroCombo}"
                          SelectionChanged="VideoSourceCombo_SelectionChanged"/>

                        <Button Grid.Column="1"
                        Content="🎚 TUNE"
                        Style="{StaticResource RetroButton}"
                        Margin="6,0,0,0"
                        Click="StartButton_Click"/>
                    </Grid>

                    <TextBlock Text="VIDEO MODE" FontSize="8.5" Foreground="#888"/>
                    <ComboBox x:Name="VideoModeCombo" IsEnabled="False" Margin="0,4,0,4"/>

                    <TextBlock Text="AUDIO SOURCE" FontSize="8.5" Foreground="#888"/>
                    <ComboBox x:Name="AudioSourceCombo"
                              Style="{StaticResource RetroCombo}"
                              SelectionChanged="AudioSourceCombo_SelectionChanged"
                              Margin="0,2,0,2"/>

                                <TextBlock Text="VOLUME"
                           Foreground="#888"
                           FontSize="11"
                           Margin="0,8,0,2"/>

                                <Slider x:Name="VolumeSlider"
                        Minimum="0"
                        Maximum="1"
                        Value="0.8"
                        SmallChange="0.01"
                        LargeChange="0.05"
                        ValueChanged="VolumeSlider_ValueChanged"/>

                <Separator/>

                    <TextBlock Text="⚙ VIDEO EFFECTS"
                               FontFamily="Consolas"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="#00ff00"
                               Margin="0,10,0,10"/>

                    <TextBlock Text="BRIGHTNESS" FontSize="8.5" Foreground="#888" />
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="BrightnessSlider"
                            Minimum="-0.25" Maximum="0.25"
                            ValueChanged="BrightnessSlider_ValueChanged"/>

                    <TextBlock Text="CONTRAST" FontSize="8.5" Foreground="#888" />
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="ContrastSlider"
                            Minimum="0.8" Maximum="1.4"
                            ValueChanged="ContrastSlider_ValueChanged"/>

                    <TextBlock Text="SATURATION" FontSize="8.5" Foreground="#888"/>
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="SaturationSlider"
                            Minimum="0" Maximum="1.5"
                            ValueChanged="SaturationSlider_ValueChanged"/>

                    <TextBlock Text="GAMMA" FontSize="8.5" Foreground="#888"/>
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="GammaSlider"
                            Minimum="0.9" Maximum="1.4"
                            ValueChanged="GammaSlider_ValueChanged"/>

                    <TextBlock Text="PHOSPHOR MASK" FontSize="8.5" Foreground="#888" />
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="PhosphorSlider"
                            Minimum="0" Maximum="0.3"
                            ValueChanged="PhosphorSlider_ValueChanged"/>

                    <TextBlock Text="SCANLINES" FontSize="8.5" Foreground="#888"/>
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="ScanlinesSlider"
                            Minimum="0" Maximum="0.7"
                            ValueChanged="ScanlinesSlider_ValueChanged"/>

                    <TextBlock Text="HORIZONTAL SIZE" FontSize="8.5" Foreground="#888" />
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="HorizontalSlider"
                            Minimum="-0.25" Maximum="0.25"
                            ValueChanged="HSizeSlider_ValueChanged"/>

                    <TextBlock Text="VERTICAL SIZE" FontSize="8.5" Foreground="#888" />
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="VerticalSlider"
                            Minimum="-0.15" Maximum="0.45"
                            ValueChanged="VSizeSlider_ValueChanged"/>

                    <TextBlock Text="CRT VIGNETTE" FontSize="8.5" Foreground="#888" />
                    <Slider Style="{StaticResource CrtSlider}"
                            x:Name="VignetteSlider"
                            Minimum="0" Maximum="1"
                            ValueChanged="VignetteSlider_ValueChanged"/>

                    <Separator Margin="0,6"/>

                    <Button Content="⛔ POWER OFF"
                            Style="{StaticResource RetroButton}"
                            Click="StopButton_Click"
                            Margin="0,6,0,6"
                            BorderBrush="#cc4444"
                            Foreground="#ff6666"/>

                    <Button Content="⛶ FULLSCREEN"
                            Style="{StaticResource RetroButton}"
                            Click="FullscreenButton_Click"/>

                    <Button Content="🔄 RESET EFFECTS"
                            Style="{StaticResource RetroButton}"
                            Click="ResetButton_Click"/>

                    <Button Content="🔄 RESET GEOMETRY"
                            Style="{StaticResource RetroButton}"
                            Click="ResetGeo_ButtonClick"/>

                    <Separator Margin="0,8"/>

                    <TextBlock Text="STATUS" FontSize="8.5" Foreground="#888"/>
                    <TextBlock x:Name="StatusText"
                               FontFamily="Consolas"
                               FontSize="10"
                               Foreground="#00ff00"
                               TextWrapping="Wrap"/>

                </StackPanel>
        </Border>
    </Grid>
</Window>
